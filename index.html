<!DOCTYPE html>
<html lang = de>
<head>
	<Title>AVPRG</title>
    <meta charset=utf-8>
    <link rel=stylesheet href=stylesheet.css type=text/css>
    <script type="text/javascript" src="Assets/highscores.js"></script>
</head>
<body>
    <div class=mainContainer>
        <h1>Beat Läufer</h1>
        <div class=buttonContainer>
            <button class="menuButton playButton" onclick="openSongSelect();">
                Spielen
            </button>
            <button class="menuButton optionButton" onclick="openOptions();">
                Optionen
            </button>
            <button class="menuButton highscoreButton" onclick="openHighscores();">
                Highscore
            </button>
        </div>
    </div>
    <div id=overlaySongSelect>
        <button id=closeButton onclick="closeOverlay();"></button>
        <button class=ssButtons id=lvl1Button onclick="location.href='game.html?WeWillRockYou'">
            <span>Queen - We Will Rock You</span>
        </button><br>
        <button class=ssButtons id=lvl2Button onclick="location.href='game.html?Heathens'">
            <span>Twenty One Pilots - Heathens</span>
        </button><br>
        <button class=ssButtons id=lvl3Button onclick="location.href='game.html?Hardmode'">
            <span>Twenty One Pilots - Heathens (Hardmode)</span>
        </button>
    </div>
    <div id=overlayOptions>
        <div id=textOptions>
            <h2>Optionen</h2>
            <table id=optionsTable>
                <tr>
                    <th colspan="2">Audio</th>
                </tr>
                <tr>
                    <td>Musiklautstärke</td>
                    <td><input type=range min=0 max=120 value="80" class=sliders id=musicVolume></td>
                </tr>
                <tr>
                    <td>Effektlautstärke</td>
                    <td><input type=range min=0 max=100 value="80" class=sliders id=effectVolume></td>
                </tr>
                <tr>
                    <th colspan="2">Tastenbelegung</th>
                </tr>
                <tr>
                    <td>Taste 1</td>
                    <td><input type=button class=keySetter id=keySetter1 value="D"></td>
                </tr>
                <tr>
                    <td>Taste 2</td>
                    <td><input type=button class=keySetter id=keySetter2 value="F"></td>
                </tr>
                <tr>
                    <td>Taste 3</td>
                    <td><input type=button class=keySetter id=keySetter3 value="J"></td>
                </tr>
                <tr>
                    <td>Taste 4</td>
                    <td><input type=button class=keySetter id=keySetter4 value="K"></td>
                </tr>
            </table>
        </div>
        <button id=closeButton onclick="closeOverlay();"></button>
        <button id=saveButton onclick="saveOptions();">Speichern</button>
    </div>
    <div id=overlayHighscores>
        <div id=textHighscore>
            <h3>Highscore Liste</h3>
            <table id=highscoreTable>
                <tr>
                    <th colspan="2">
                        <div class=tab>
                            <button class="tablinks" id=tab1 onclick="loadScore(1)">We Will Rock You</button>
                            <button class="tablinks" onclick="loadScore(2)">Heathens</button>
                            <button class="tablinks" onclick="loadScore(3)">Heathens - Hardmode</button>
                        </div>
                    </th>
                </tr>
                <script language="javascript" type="text/javascript">
                    for (var i = 0; i < 10; i++) 
                    {
                        document.write("<tr><td>" + highscoreList1[i] + "</td>");
                        document.write("<td>" + highscoreList1[i + 1] + "</td></tr>");
                        i++;
                    }
                </script>
            </table>
        </div>
        <button id=closeButton onclick="closeOverlay();"></button>
    </div>
    <script>
        document.getElementById("overlaySongSelect").style.display = "none";
        document.getElementById("overlayOptions").style.display = "none";
        document.getElementById("overlayHighscores").style.display = "none";
        localStorage.setItem("musicVolume", musicVolume.value);
        localStorage.setItem("effectVolume", effectVolume.value);
        var table = document.getElementById("highscoreTable");
        
        function openSongSelect()
        {
            document.getElementById("overlaySongSelect").style.display = "block";
        }
        function openOptions()
        {
            document.getElementById("overlayOptions").style.display = "block";
        }
        function openHighscores()
        {
            document.getElementById("overlayHighscores").style.display = "block";
        }
        function closeOverlay()
        {
            document.getElementById("overlayOptions").style.display = "none";
            document.getElementById("overlayHighscores").style.display = "none";
            document.getElementById("overlaySongSelect").style.display = "none";
        }
        function loadScore(levelNmb)
        {
            if(levelNmb == 1)
            {
                table.rows[1].cells[0].innerHTML = highscoreList2[0];
                table.rows[1].cells[1].innerHTML = highscoreList1[1];
                table.rows[2].cells[0].innerHTML = highscoreList1[2];
                table.rows[2].cells[1].innerHTML = highscoreList1[3];
                table.rows[3].cells[0].innerHTML = highscoreList1[4];
                table.rows[3].cells[1].innerHTML = highscoreList1[5];
                table.rows[4].cells[0].innerHTML = highscoreList1[6];
                table.rows[4].cells[1].innerHTML = highscoreList1[7];
                table.rows[5].cells[0].innerHTML = highscoreList1[8];
                table.rows[5].cells[1].innerHTML = highscoreList1[9];
            }
            else if(levelNmb == 2)
            {
                table.rows[1].cells[0].innerHTML = highscoreList2[0];
                table.rows[1].cells[1].innerHTML = highscoreList2[1];
                table.rows[2].cells[0].innerHTML = highscoreList2[2];
                table.rows[2].cells[1].innerHTML = highscoreList2[3];
                table.rows[3].cells[0].innerHTML = highscoreList2[4];
                table.rows[3].cells[1].innerHTML = highscoreList2[5];
                table.rows[4].cells[0].innerHTML = highscoreList2[6];
                table.rows[4].cells[1].innerHTML = highscoreList2[7];
                table.rows[5].cells[0].innerHTML = highscoreList2[8];
                table.rows[5].cells[1].innerHTML = highscoreList2[9];
            }
            else if(levelNmb == 3)
            {
                table.rows[1].cells[0].innerHTML = highscoreList3[0];
                table.rows[1].cells[1].innerHTML = highscoreList3[1];
                table.rows[2].cells[0].innerHTML = highscoreList3[2];
                table.rows[2].cells[1].innerHTML = highscoreList3[3];
                table.rows[3].cells[0].innerHTML = highscoreList3[4];
                table.rows[3].cells[1].innerHTML = highscoreList3[5];
                table.rows[4].cells[0].innerHTML = highscoreList3[6];
                table.rows[4].cells[1].innerHTML = highscoreList3[7];
                table.rows[5].cells[0].innerHTML = highscoreList3[8];
                table.rows[5].cells[1].innerHTML = highscoreList3[9];
            }
        }
        function saveOptions()
        {
            localStorage.setItem("musicVolume", musicVolume.value);
            localStorage.setItem("effectVolume", effectVolume.value);
            document.getElementById("overlayOptions").style.display = "none";
        }
    </script>
    <!--<canvas id=canvasMenu width=800 height=200></canvas>
    <script>
        const FPS = 30;
        const backgroundSound = "sounds/Menu/Trancyvania.mp3";
        const backgroundDelay = 0.1;

        var canv = document.getElementById("canvasMenu");
        var ctx = canv.getContext("2d");
        var context = new AudioContext();
	    var request = new XMLHttpRequest();
        var sourceBuffer = context.createBufferSource();

        var platforms = [450];

        request.open('GET', backgroundSound, true);
	    request.responseType = 'arraybuffer';
        request.onload = function () 
        {
	    	var undecodedAudio = request.response;
            context.decodeAudioData(undecodedAudio, function (buffer) 
            {
	    		sourceBuffer.buffer = buffer;
                sourceBuffer.connect(context.destination);
                sourceBuffer.loop = true;
                sourceBuffer.start(context.currentTime +backgroundDelay);
	    	});
	    };
        request.send();

        setInterval(update, 1000 / FPS);

        function update()
        {
            ctx.fillStyle = "#333333";
            ctx.fillRect(0, 0, canv.width, canv.height);

            ctx.fillStyle = "white";
            ctx.fillRect(0, 100, canv.width, 30);

            for(var i = 0; i < platforms.length; i++)
            {
                platforms[i] = platforms[i] - 19;
                if(platforms[i] <= -80 )platforms[i] = 960
            }
            for(var i = 0; i < platforms.length; i++)
            {
                ctx.fillStyle = "blue"; 
                ctx.fillRect(platforms[i], 100, 50, 30);
            }

            ctx.strokeStyle = "red";
            ctx.lineWidth = 7;
            ctx.beginPath();
            ctx.moveTo(200, 0);
            ctx.lineTo(200, 150);
            ctx.stroke();
        }
    </script>-->
</body>
</html>